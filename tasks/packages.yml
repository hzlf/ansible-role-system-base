---

- name: Update apt cache
  apt: update_cache=yes cache_valid_time=3600
  tags: tools

- name: Update packages
  apt: upgrade=safe
  tags: util

- name: install apt-transport-https
  apt: pkg=apt-transport-https state=present force=yes
  tags: util

# locales & timezone
- name: install locales
  apt: pkg=locales state=present

- name: ensure UTF-8 locale
  locale_gen: name=en_US.UTF-8 state=present
  tags: util

- name: Locale - check current locale settings
  command: /usr/bin/locale
  register: locale_output
  changed_when: locale_output.stderr != ''

- name: Locale - generate UTF-8 locale
  command: /usr/sbin/locale-gen en_US.UTF-8
  when: locale_output.stderr != ''

- name: Locale - adjust current locale
  command: /usr/sbin/update-locale LANG=en_US.UTF-8 LC_ALL=en_US.UTF-8
  when: locale_output.stderr != ''

- name: Update Timezone
  copy: content="{{ system_base_timezone }}\n" dest=/etc/timezone owner=root group=root mode=0644
  become: true
  register: timezone

- name: Reconfigure Timezone Data
  shell: dpkg-reconfigure -f noninteractive tzdata
  become: true
  when: timezone.changed

- name: install htop
  apt: pkg=htop state=present

- name: install sudo
  apt: pkg=sudo state=present

- name: install screen
  apt: pkg=screen state=present

- name: install ntp
  apt: pkg=ntp state=present

- name: install git
  apt: pkg=git state=present

- name: install multitail
  apt: pkg=multitail state=present

- name: install ca-certificates
  apt: pkg=ca-certificates state=present

# python
- name: install pip
  easy_install: name=pip

- name: install virtualenv
  easy_install: name=virtualenv



